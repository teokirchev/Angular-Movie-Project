<app-loader *ngIf="isLoading" class="loader"></app-loader>
<div class="container" *ngIf="selectedMovie">
    <div class="image-wrapper">
        <img [src]="selectedMovie.imageUrl" alt="">
    </div>
    <div class="details-wrapper">
        <div>
            <div class="raiting">
                <h2>{{selectedMovie.name}}</h2>
                <app-movie-rating></app-movie-rating>
            </div>
            <p><span>Year:</span> {{selectedMovie.year}}</p>
            <p *ngIf="selectedMovie.isPremium"><span>Type:</span> Premium</p>
            <p *ngIf="!selectedMovie.isPremium"><span>Type:</span> Basic</p>
            <p><span>Details:</span> {{selectedMovie.details}}</p>
        </div>
        <div class="btn-wrapper">
            <button *ngIf="isOwner" class="edit-btn" (click)="editMovie()">Edit</button>
            <button class="comment-btn" (click)="openCommentMovie()">Comment</button>
            <button *ngIf="isOwner" class="delete-btn" (click)="deleteMovie()">Delete</button>
            <i class="fa-solid fa-heart" [ngStyle]="{'color': likeButtonColor }"
            (click)="likeMovie()"></i>
        </div>
    </div>
</div>


<app-comment *ngIf="isCommentClick" (closeForm)="closeCommentForm()" (emitCommentData)="createComment($event)">
</app-comment>

<app-edit-comment *ngIf="isEditCommentClick" (closeEditForm)="closeEditCommentForm()"
    (emitEditedCommentData)="editComment($event)" [editedCommentData]="editedCommentData">
</app-edit-comment>


<ng-container *ngIf="!isLoading">
    <div *ngIf="allComments.length === 0" class="no-comments">
        <p class="no-comments-text">There are no comments yet. Be the first?</p>
        <button class="no-comment-btn" (click)="openCommentMovie()">Comment</button>
    </div>
</ng-container>

<div class="comment-container" *ngIf="allComments.length > 0">

    <h2 class="comment-title">Comments section:</h2>

    <div *ngFor="let comment of allComments">

        <span class="comment-name">{{comment.ownerEmail}}:</span>
        <div class="comment-wrapper">
            <p class="comment">{{comment.comment}}</p>
            <div *ngIf="isOwner">
                <i class="fa-solid fa-trash-can" (click)="deleteComment(comment.id)"></i>
                <i class="fa-solid fa-file-pen" (click)="openEditComment(comment)"></i>
            </div>

        </div>
    </div>
</div>